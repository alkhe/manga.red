"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var _react=require("react"),_react2=_interopRequireDefault(_react),_reactRouter=require("react-router"),_hub=require("../hub"),_mixinsSymbiosisMixin=require("../mixins/symbiosis-mixin"),_mixinsSymbiosisMixin2=_interopRequireDefault(_mixinsSymbiosisMixin),_mixinsDomEventMixin=require("../mixins/dom-event-mixin"),_mixinsDomEventMixin2=_interopRequireDefault(_mixinsDomEventMixin),_viewsProgress=require("../views/progress"),_viewsProgress2=_interopRequireDefault(_viewsProgress),_constantsProcessConstants=require("../constants/process-constants"),_constantsProcessConstants2=_interopRequireDefault(_constantsProcessConstants),keys={end:35,home:36,left:37,right:39};exports["default"]=_react2["default"].createClass({displayName:"manga-chapter",mixins:[_reactRouter.State,_mixinsSymbiosisMixin2["default"](_hub.Stores.MangaChapter),_mixinsDomEventMixin2["default"]($(document.body),"keydown","handleKey")],componentWillMount:function(){_hub.Actions.MangaUI.toChapter();var e=this.getParams();_hub.Actions.MangaAPI.getChapter(e.chapter)},handleKey:function(e){switch(e.which){case keys.left:_hub.Actions.MangaUI.readPreviousPage(),document.body.scrollTop=0;break;case keys.right:_hub.Actions.MangaUI.readNextPage(),document.body.scrollTop=0;break;case keys.home:e.preventDefault(),_hub.Actions.MangaUI.readFirstPage(),document.body.scrollTop=0;break;case keys.end:e.preventDefault(),_hub.Actions.MangaUI.readLastPage(),document.body.scrollTop=0}},render:function(){var e=void 0,t=this.state;return t.process==_constantsProcessConstants2["default"].Done&&(e=_react2["default"].createElement("img",{style:{height:"calc(86vh - 50px)"},src:"https://cdn.mangaeden.com/mangasimg/"+t.pages[t.pages.length-t.page-1][1]})),_react2["default"].createElement("div",null,_react2["default"].createElement(_viewsProgress2["default"],{loading:_constantsProcessConstants2["default"].Loading(t.process)}),_react2["default"].createElement("div",{className:"center-align"},e))}}),module.exports=exports["default"];